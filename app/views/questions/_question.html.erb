<% user_name = question.user.nil? ? "(anonymous)" : question.user.name %>

<li id="<%= dom_id question %>" class="<%= status_class(question) %>">
  <h4><%= question.title %></h4>
  <p> <%= question.body %> </p>
  <p>Asked by: <strong><%= user_name %></strong>
  <span class="question-id">ID: <%= question.id %></span>

  <% if question.approved_answers.present? %>
    <p>Approved answers:</p>
    <ul class="answers approved">
      <% question.approved_answers.each do |a| %>
        <li>
          <p>Answer by <strong><%= a.user.name %></strong></p>
          <p><%= a.body %></p>
        </li>
      <% end %>
    </ul>
  <% end %>

  <% if question.proposed_answers.present? %>
    <p>Proposed answers:</p>
    <ul class="answers proposed">
      <% question.proposed_answers.each do |a| %>
        <li>
          <p>Answer by <strong><%= a.user.name %></strong></p>
          <p>Proposed fee: <strong>Â£<%= a.payment.amount %></strong></p>
          <%= form_with(model: a.payment) do |form| %>
            <%= form.hidden_field :approved, value: true %>
            <%= form.submit %>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% end %>
</li>
